{% extends 'main.html' %}
{% load tz %}


{% block content %}
<style>
    .home-container{
        display: grid;
        grid-template-columns: 4fr 6fr 5fr 5fr;
        column-gap: 2px;
    }    
    
    #table-style {
    font-family: Arial, Helvetica, sans-serif;
    border-collapse: collapse;
    width: 100%;
    }

    #table-style td, #table-style th {
    border: 1px groove #04AA6D;
    padding: 1px;
    }

    #table-style tr:nth-child(even){background-color: #202020;}

    /* #table-style tr:hover {background-color: #ddd;} */

    #table-style th {
    padding-top: 3px;
    padding-bottom: 3px;
    text-align: left;
    background-color:#04AA6D;
    color: white;
    }
    .header_super {
        display:grid;
        grid-template-columns: 1fr 1fr;
        /* width: 100%; */
        font-family: Arial, Helvetica, sans-serif;
        font-size: 18px;
        color:#71c6dd;
    }
    .header_last {
        text-align: right;
        /* margin-right: 4px; */
        font-size: 14px;
        margin-top: 4px;
        color:darkgray;
    }

</style>
<h1 class="header_super">
    <div class="">Branch : {{branch.name}}({{branch.bcode}})</div>
    <div class="header_last">Last update: {{now|timezone:localtimezone}}</div>
</h1>

<div class="home-container">
    <div>
        <h3>Ticket Printer Status:</h3>
        <table id="table-style">
            <thead>
                <tr>
                    <th>Printer</th>
                    <th>Paper status</th>
                </tr>
            </thead>
            <tbody>
            {% for printer in printerstatuslist %}
            <tr>
                <td>{{printer.printernumber}}</td>
                {% if printer.status == "<P_FINE>" %}
                    <td style="color:lightgreen" >{{printer.statustext}}</td>
                {% elif printer.status == "<P_NEAREND>" %}
                    <td style="color:yellow" >{{printer.statustext}}</td>
                {% elif printer.status == "<P_END>" %}
                    <td style="color:red" >{{printer.statustext}}</td>
                {% elif printer.status == "<OPEN>" %}
                    <td style="color:orange" >{{printer.statustext}}</td> 
                {% else %}
                    <td>{{printer.statustext}}</td> 
                {% endif %}
            </tr>
            {% endfor %}
            </tbody>
        </table>

        <h3>Waiting Ticket: </h3>
        {% for table in qlist %}
        {% if table.count > 0 %}
        
            <h3>Counter: {{table.0.countertype.lang1}}</h3>
            <table id="table-style">
                <thead>
                    <tr>
                        <th>Ticket</th>
                        <th>Ticket Time</th>
                    </tr>
                </thead>
                <tbody>
                {% for ticket in table %}
                <tr>
                    <td>{{ticket.tickettype}}{{ticket.ticketnumber}}</td>                   
                    <td>{{ ticket.tickettime|timezone:localtimezone }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        {% endif %}
        {% endfor %}
    </div>

    <div>
        <h3>Counter Status: </h3>
       
       
            <table id="table-style">
                <thead>
                    <tr>
                        <th>Counter Type</th>
                        <th>Number</th>
                        <th>Enabled</th>                        
                        <th>Status</th>
                        <th>Ticket</th>
                        <th>Login</th>                        
                    </tr>
                </thead>
                <tbody>
                {% for table in counterstatus %}
                {% for counter in table %}
                <tr>
                    <td>{{ counter.countertype.lang1 }}</td>                   
                    <td>{{ counter.counternumber }}</td>
                    <td>{{ counter.enabled }}</td>                    
                    <td>{{ counter.status }}</td>
                    {% if counter.tickettemp == None %}
                        <td>---</td>
                    {% else %}
                        <td>{{ counter.tickettemp }}</td>
                    {% endif %}
                    {% if counter.user == None %}
                        <td>---</td>
                    {% else %}
                        <td>{{ counter.user }}</td>
                    {% endif %}                    
                    
                </tr>
                {% endfor %}
                {% endfor %}
                </tbody>
            </table>       
    </div>

    <div>
        <h3>Completed Ticket: </h3>
        <table id="table-style">
            <thead>
                <tr>
                    <th>Ticket</th>
                    <th>Ticket Time</th>
                    <th>User</td>
                </tr>
            </thead>
            <tbody>
            {% for ticket in donelist %}
            <tr>
                <td>{{ticket.tickettype}}{{ticket.ticketnumber}}</td>                   
                <td>{{ ticket.tickettime|timezone:localtimezone }}</td>
                <td>{{ ticket.user }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <div>
        <h3>No Show Ticket: </h3>
        <table id="table-style">
            <thead>
                <tr>
                    <th>Ticket</th>
                    <th>Ticket Time</th>
                    <th>User</td>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
            {% for ticket in misslist %}
            <tr>
                <td>{{ticket.tickettype}}{{ticket.ticketnumber}}</td>                   
                <td>{{ ticket.tickettime|timezone:localtimezone }}</td>
                <td>{{ ticket.user }}</td>
                <td>{{ ticket.status }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>









</div>
{% endblock content %}
